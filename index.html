<html>
<head>
        <meta charset="utf-8" />
		
		
        <title>CATNAT</title>
		 
		  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
		  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
		  

		  <!-- CSS  -->
		  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
		  <link href="materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
		  
		  <script src="https://d3js.org/d3.v4.min.js"></script>
		  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	</head>
<body>
<div>
<div class="navbar-fixed">
<nav class="orange" role="navigation">
	<a href="#" class="brand-logo">CATNAT -Find more about natural disasters</a>
    
  </nav>	  
  </div>
   <div class="row">
   			<div class="col s2 orange lighten-2">
   				<form action="#">
			    <p>
			      <label>
			        <input type="checkbox" class="filled-in" checked />
			        <span class="white-text">World map</span>
			      </label>
			    </p>
			    <p>
			      <label>
			        <input type="checkbox" class="filled-in"  />
			        <span class="white-text">Connection graph</span>
			      </label>
			    </p>
			    <p>
			      <label>
			        <input type="checkbox" class="filled-in"  />
			        <span class="white-text">Tree Map</span>
			      </label>
			    </p>
			    
			  </form>
   			</div>
   			<div class="col s8" >
   				<div id="svgcontainer"></div>
   				<div class="row">
   					<div class="col s1 offset-s2"> <img src="drought.png" width="100%"/></div>
   					<div class="col s1"> <img src="earthquake.png" width="100%"/></div>
   					<div class="col s1"> <img src="extremetemperature.png" width="100%" /></div>
   					<div class="col s1"> <img src="fog.png" width="100%" style="border:2px solid black;border-radius:50%"/></div>
   					<div class="col s1"> <img src="impact.png" width="100%"/></div>
   					<div class="col s1"> <img src="storm.png" width="100%"/></div>
   					<div class="col s1"> <img src="wildfire.png" width="100%"/></div>
   					<div class="col s1"> <img src="volcano.png" width="100%"/></div>
   				</div>
   			</div>
   			<div class="col s2" id="details">
   				
   			</div>
   		
   </div>

  





</div>



<footer class="page-footer orange" >
    
    <div class="footer-copyright">
      <div class="container">
      Créé par Guillaume Le Gall, Jean-Thomas Beaudoin et Xavier Lavie
      </div>
    </div>
  </footer>

<script>
		
  		var height = 430;
		var svg = d3.select( "#svgcontainer" )
  		.append( "svg" )
		  .attr( "height", height );

    var projection = d3.geoNaturalEarth1().center([60.454071, -10]).scale(140)

    var path = d3.geoPath() // d3.geo.path avec d3 version 3
                 .projection(projection);
    
    var color = d3.scaleOrdinal(d3.schemeCategory10)
		// Load external data and boot
		
d3.json("https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson", function(data){

  
  
    // Draw the map
    svg.append("g")
        .selectAll("path")
        .data(data.features)
        .enter().append("path")
            .attr("fill", "#69b3a2")
            .attr("d", d3.geoPath()
                .projection(projection)
            )
            .style("stroke", "#fff")
            .style("opacity", 0.6)
})
    d3.csv("https://raw.githubusercontent.com/glegall7/datavizCATNAT/master/test6.csv", function(data){
      console.log(data)
      d3.csv("https://raw.githubusercontent.com/glegall7/datavizCATNAT/master/couleur.csv", function(couleur){
      console.log(couleur)
      
      svg.append("g").selectAll("circle")
		.data(data).enter()
		.append("circle")
		.attr("cx", function (d) {return projection([d.newlongitude,d.newlatitude])[0]; })
		.attr("cy", function (d) { return projection([d.newlongitude,d.newlatitude])[1]; })
		.attr("r", "2px")
		.attr("fill", function (d) {
			console.log(d);
			couleur.findIndex(d.Disaster_Type);
			return color(d.Disaster_type)})
		.style("opacity", 0.6)
		.on("mouseover", function(d,i){ 
    			d3.selectAll("circle")
          .style("opacity", .3)
          d3.select(this).style("opacity",1)
          elm=document.getElementById("details")
          elm.innerHTML='<li>'+d.Country+'</li>'
    })
    .on("mouseout", function(d) {d3.selectAll("circle")
          .style("opacity", 0.6)
          elm=document.getElementById("details")
          elm.innerHTML=''   ;   
    })
    
      })
    })
    
  </script>
  <style>
  	svg { display: block;
  	width:100%}
  	g { 
  	width:100%}
  	.col{height:600px}
  </style>

<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="materialize.js"></script>
  <script src="init.js"></script>
    
</body>

</html>
